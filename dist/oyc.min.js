var M=new DOMParser;function O(t,e){let n=M.parseFromString(`<body><template>${t}</template></body>`,"text/html").querySelector("template").content;return e?n.querySelector(e):n}function H(t,e,n){for(;n.childNodes.length>0;){let r=n.firstChild;t.insertBefore(r,e),r.nodeType===Node.ELEMENT_NODE&&p(r)}}function m(t,e){let n=O(e),r=t.firstChild;if(H(t,r,n),r){for(;r.nextSibling;)t.removeChild(r.nextSibling);t.removeChild(r)}}async function y(t,e,n){let r=await fetch(e,{method:t.toUpperCase()});if(r.ok){let o=await r.text();m(n,o)}}var d=["get","post","put","patch","delete","head"],g=d.flatMap(t=>[`[oyc-${t}]`,`[data-oyc-${t}]`]).join(","),x="oyc-ignore",D=["oyc-trigger","oyc-class"],v=D.flatMap(t=>[`[${t}]`,`[data-${t}]`]).join(",");function b(t){return t.querySelectorAll(g+","+v)}var P=new XPathEvaluator().createExpression('//*[@*[ starts-with(name(), "oyc-on:") or starts-with(name(), "data-oyc-on:") ] and not(@oyc-ignore) and not(@data-oyc-ignore)]');function w(t){let e=P.evaluate(t,4),n=null,r=[];for(;n=e.iterateNext();)r.push(n);return r}function s(t,e){return t.getAttribute(e)||t.getAttribute("data-"+e)}var I="oyc-data";function A(t){return t[I]||{}}function E(t){if(t===void 0)return;let e=parseFloat(t);switch(t.replace(e.toString(),"")){case"ms":return e;case"s":return e*1e3;case"m":return e*6e4;default:console.warn("[OYC] Invalid time interval: "+t);return}}function u(t,e,n,r){if(!r||Object.keys(r).length===0){t.addEventListener(e,n);return}let o=function(i){if(r.delay){setTimeout(()=>{n(i)},r.delay);return}if(r.throttle)throw new Error("Throttle is not yet implemented");if(r.debounce)throw new Error("Debounce is not yet implemented");n(i)};t.addEventListener(e,o,r)}function T(t,e,n){t.removeEventListener(e,n)}var $={event:"click",modifiers:void 0};function f(t){if(!t)return;let e=t.split(" "),n=e[0],r={};for(let o=1;o<e.length;o++){let i=e[o].trim();if(!e[o].trim())continue;switch(i){case"once":case"prevent":case"capture":case"passive":{r[i]=!0;continue}}let l=i.split(":"),c=l[0],a=l[1];switch(c){case"poll":case"delay":case"throttle":case"debounce":{r[c]=E(a);continue}}}return{event:n,modifiers:r}}function L(t,e){let n={...$,...f(s(t,"oyc-trigger"))};u(t,n.event,e,n.modifiers)}function S(t){for(let e=0;e<d.length;e++){let n=s(t,"oyc-"+d[e]);n&&L(t,r=>{y(d[e],n,r.target)})}}var h=class{ready=document.readyState==="complete";on=u;off=T;getOycData=A;process=p;constructor(){this.ready==!1&&document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&(this.ready=!0)}),this.onReady(function(){p(document.body)})}onReady(e){this.ready?e():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&e()})}};function C(t){S(t)}function F(t){let e=w(t);for(let n=0;n<e.length;n++){let r=e[n];for(let o=0;o<r.attributes.length;o++){let i=r.attributes[o];if(i.name.startsWith("oyc-on:")||i.name.startsWith("data-oyc-on:")){let l=i.name.slice(i.name.indexOf(":")+1),c=i.value,a=f(s(r,"oyc-trigger"));a?u(r,a.event,window[c],a.modifiers):u(r,l,window[c])}}}}function p(t){if(s(t,x))return;C(t);let e=b(t);for(let n=0;n<e.length;n++)C(e[n]);F(t)}var N=new h;typeof window<"u"&&(window.oyc=N);export{h as Oyc,N as oyc,E as parseInterval,C as processElement,p as processElementAndChildren};
