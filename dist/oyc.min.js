var S=new DOMParser;function H(e,t){let n=S.parseFromString(`<body><template>${e}</template></body>`,"text/html").querySelector("template").content;return t?n.querySelector(t):n}function M(e,t,n){for(;n.childNodes.length>0;){let r=n.firstChild;e.insertBefore(r,t),r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE&&u(r)}}function y(e,t){let n=H(t),r=e.firstChild;if(M(e,r,n),r){for(;r.nextSibling;)e.removeChild(r.nextSibling);e.removeChild(r)}}async function m(e,t,n){let r=await fetch(t,{method:e.toUpperCase()});if(r.ok){let o=await r.text();y(n,o)}}var c=["get","post","put","patch","delete","head"],v=c.flatMap(e=>[`[oyc-${e}]`,`[data-oyc-${e}]`]).join(","),C=["trigger"],g=C.flatMap(e=>[`[oyc-${e}]`,`[data-oyc-${e}]`]).join(",");function x(e){return e.querySelectorAll?e.querySelectorAll(v+","+g):[]}function w(e){let t=document.evaluate('//*[@*[ starts-with(name(), "oyc-on:") or starts-with(name(), "data-oyc-on:") ]]',e),n=null,r=[];for(;n=t.iterateNext();)r.push(n);return r}function E(e,t){return e.hasAttribute(t)||e.hasAttribute("data-"+t)}function l(e,t){return e.getAttribute(t)||e.getAttribute("data-"+t)}var O="oyc-data";function f(e){return e[O]||{}}function D(e){if(e===void 0)return;let t=parseFloat(e);switch(e.replace(t,"")){case"ms":return t;case"s":return t*1e3;case"m":return t*6e4;default:console.warn("[OYC] Invalid time interval: "+e);return}}function d(e,t,n,r){if(!r||Object.keys(r).length===0){e.addEventListener(t,n);return}let o=function(i){if(r.delay){setTimeout(()=>{n(i)},r.delay);return}if(r.throttle)throw new Error("Throttle is not yet implemented");if(r.debounce)throw new Error("Debounce is not yet implemented");n(i)};e.addEventListener(t,o,r)}function b(e,t,n){e.removeEventListener(t,n)}var N={event:"click",modifiers:void 0};function p(e){if(!e)return;let t=e.split(" "),n=t[0],r={};for(let o=1;o<t.length;o++){let i=t[o].trim();if(!t[o].trim())continue;switch(i){case"once":case"prevent":case"capture":case"passive":{r[i]=!0;continue}}let s=i.split(":"),a=s[0],A=s[1];switch(a){case"poll":case"delay":case"throttle":case"debounce":{r[a]=D(A);continue}}}return{event:n,modifiers:r}}function T(e,t){let n={...N,...p(l(e,"oyc-trigger"))};d(e,n.event,t,n.modifiers)}var h=class{ready=document.readyState==="complete";on=d;off=b;getOycData=f;process=L;constructor(){this.ready==!1&&document.addEventListener("readystatechange",t=>{t.target.readyState==="complete"&&(this.ready=!0)}),this.onReady(function(){L(document.body)})}onReady(t){this.ready?t():document.addEventListener("readystatechange",n=>{n.target.readyState==="complete"&&t()})}};function u(e){for(let t=0;t<c.length;t++)E(e,"oyc-"+c[t])&&T(e,function(n){m(c[t],l(e,"oyc-"+c[t]),n.target)})}function P(e){$(e),w(e).forEach(t=>{let n=f(t);n.onEventHandlers=[];for(let r=0;r<t.attributes.length;r++){let o=t.attributes[r];if(o.name.startsWith("oyc-on:")||o.name.startsWith("data-oyc-on:")){let i=o.name.slice(o.name.indexOf(":")+1),s=o.value,a=p(l(t,"oyc-trigger"));a?d(t,a.event,window[s],a.modifiers):d(t,i,window[s],void 0),n.onEventHandlers.push({event:i,listener:s})}}})}function $(e){let t=f(e);if(t.onEventHandlers){for(let n=0;n<t.onHandlers.length;n++)e.removeEventListener(handler.event,handler.listener);delete t.onEventHandlers}}function L(e){u(e);let t=x(e);for(let n=0;n<t.length;n++)u(t[n]);P(e)}var q=new h;typeof window<"u"&&(window.oyc=q);export{h as Oyc,q as oyc,u as processElement};
