var T=new DOMParser;function w(n,e){let t=T.parseFromString(`<body><template>${n}</template></body>`,"text/html").querySelector("template").content;return e?t.querySelector(e):t}function A(n,e,t,r){for(console.log(r,`IS ONPROCES
`);t.childNodes.length>0;){let o=t.firstChild;n.insertBefore(o,e),o.nodeType===Node.ELEMENT_NODE&&r(o)}}function h(n,e,t){let r=w(e),o=n.firstChild;if(A(n,o,r,t),o){for(;o.nextSibling;)n.removeChild(o.nextSibling);n.removeChild(o)}}async function f(n,e,t,r){let o=await fetch(e,{method:n.toUpperCase()});if(o.ok){let s=await o.text();h(t,s,r)}}var c=["get","post","put","patch","delete","head"],m=c.flatMap(n=>[`[oyc-${n}]`,`[data-oyc-${n}]`]).join(","),g="oyc-ignore",L=["oyc-trigger"],y=L.flatMap(n=>[`[${n}]`,`[data-${n}]`]).join(",");var C="oyc-data";function v(n){return n[C]||{}}function x(n){if(n===void 0)return;let e=parseFloat(n);switch(n.replace(e.toString(),"")){case"ms":return e;case"s":return e*1e3;case"m":return e*6e4;default:console.warn("[OYC] Invalid time interval: "+n);return}}function a(n,e,t,r){if(!r||Object.keys(r).length===0){n.addEventListener(e,t);return}let o=function(s){if(r.delay){setTimeout(()=>{t(s)},r.delay);return}if(r.throttle)throw new Error("Throttle is not yet implemented");if(r.debounce)throw new Error("Debounce is not yet implemented");t(s)};n.addEventListener(e,o,r)}function b(n,e,t){n.removeEventListener(e,t)}var H={event:"click",modifiers:void 0};function p(n){if(!n)return;let e=n.split(" "),t=e[0],r={};for(let o=1;o<e.length;o++){let s=e[o].trim();if(!e[o].trim())continue;switch(s){case"once":case"prevent":case"capture":case"passive":{r[s]=!0;continue}}let i=s.split(":"),d=i[0],l=i[1];switch(d){case"poll":case"delay":case"throttle":case"debounce":{r[d]=x(l);continue}}}return{event:t,modifiers:r}}function E(n,e){let t={...H,...p(n.getAttribute("oyc-trigger"))};a(n,t.event,e,t.modifiers)}var I=new XPathEvaluator().createExpression('//*[@*[ starts-with(name(), "oyc-on:") or starts-with(name(), "data-oyc-on:") ] and not(@oyc-ignore) and not(@data-oyc-ignore)]'),S=class{ready=document.readyState==="complete";on=a;off=b;process=this.processElementAndChildren;getOycData=v;extensions=[];cssSelector=m+","+y;constructor(){this.ready==!1&&document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&(this.ready=!0)}),this.onReady(()=>{this.processElementAndChildren(document.body)})}registerExtension(e){e.init&&e.init(this),this.cssSelector+=e.attribute?",["+e.attribute+"]":","+e.attributes.map(t=>"["+t+"]").join(","),this.extensions.push(e)}onReady(e){this.ready?e():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&e()})}processElement(e){this.processHTTPAttributes(e);for(let t=0;t<this.extensions.length;t++)this.extensions[t].process(e)}addCustomEventListeners(e){let t=this.findOnElements(e);for(let r=0;r<t.length;r++){let o=t[r];for(let s=0;s<o.attributes.length;s++){let i=o.attributes[s];if(i.name.startsWith("oyc-on:")||i.name.startsWith("data-oyc-on:")){let d=i.name.slice(i.name.indexOf(":")+1),l=i.value,u=p(o.getAttribute("oyc-trigger"));u?a(o,u.event,window[l],u.modifiers):a(o,d,window[l])}}}}processElementAndChildren(e){if(e.getAttribute(g))return;console.log("THIS THIS",this),this.processElement(e);let t=this.findOycChildren(e);for(let r=0;r<t.length;r++)this.processElement(t[r]);this.addCustomEventListeners(e)}findOycChildren(e){return e.querySelectorAll(this.cssSelector)}findOnElements(e){let t=I.evaluate(e,4),r=null,o=[];for(;r=t.iterateNext();)o.push(r);return o}processHTTPAttributes(e){for(let t=0;t<c.length;t++){let r=e.getAttribute("oyc-"+c[t]);r&&E(e,o=>{console.log("THIS THIS THIS HIST HISTSADDSA ",this),f(c[t],r,o.target,this.processElementAndChildren.bind(this))})}}};export{S as Oyc,x as parseInterval};
